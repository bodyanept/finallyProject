{% extends 'base.html' %}
{% block title %}ZapChasti — главная{% endblock %}
{% block content %}
  <div class="space-y-8">
    <div class="rounded-xl bg-gradient-to-r from-brand-600 to-brand-500 p-6 text-white">
      <h1 class="text-2xl md:text-3xl font-semibold">Магазин автозапчастей</h1>
      <p class="mt-2 text-white/90">Ищите по названию, артикулу или производителю — как в маркетплейсе.</p>
      <a href="/catalog/" class="mt-4 inline-block bg-white text-brand-700 px-4 py-2 rounded-md font-medium hover:bg-slate-100">Перейти в каталог</a>
    </div>

    <section>
      <div class="flex items-baseline justify-between mb-4">
        <h2 class="text-xl font-semibold">Новинки</h2>
        <a href="/catalog/" class="text-sm text-brand-600 hover:underline">Смотреть все</a>
      </div>

      <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
        {% for p in featured %}
        <div class="group rounded-xl overflow-hidden border bg-white hover:shadow transition">
          <a href="/parts/{{ p.slug }}/" class="block aspect-[4/3] bg-slate-100 relative">
            {% if p.images and p.images.0 %}
              <img src="{{ p.images.0 }}" alt="{{ p.name }}" class="absolute inset-0 w-full h-full object-cover" loading="lazy">
            {% else %}
              <div class="absolute inset-0 flex items-center justify-center text-slate-400">нет фото</div>
            {% endif %}
          </a>
          <div class="p-3">
            <a href="/parts/{{ p.slug }}/" class="block text-sm font-medium line-clamp-2 leading-5 hover:underline">{{ p.name }}</a>
            <div class="mt-2 flex items-center justify-between">
              <div class="text-lg font-semibold text-brand-600">{{ p.price }} ₽</div>
              <button
                type="button"
                hx-post="/api/cart/items/"
                hx-vals='{"product": {{ p.id }}, "quantity": 1}'
                hx-trigger="click"
                hx-on::after-request="refreshCartBadge()"
                class="text-sm px-3 py-1.5 rounded-md bg-brand-600 text-white hover:bg-brand-700"
              >В корзину</button>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </section>

    <div class="rounded-lg border bg-white p-4">
      <h2 class="font-medium mb-2">Проверка API</h2>
      <p class="text-sm">Документация API: <a class="text-blue-600 hover:underline" href="/api/docs/">/api/docs/</a></p>
    </div>
  </div>
{% endblock %}
